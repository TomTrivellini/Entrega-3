<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--Seo-->
    <link rel="shortcut icon" href="../assets/cosas/Ace.png">
    <meta name="description" content="Aqui podras editar a tu piloto">
    <meta name="keywords" content="perfil,piloto, editar">
    <meta name="author" content="Tomas Trivellini">
    <title>Datos del Piloto</title>

    <!--links-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
<div class="form-page">
    <div class="form-wrapper">   
        <form id="pilotForm">
        
        <label for="pilotName">Nombre del piloto:</label>
        <input type="text" id="pilotName" name="pilotName" class="form-control">
        
        <label>Fecha de Nacimiento:</label>
        <input type="date" class="form-control">
        
        <label>color favorito:</label>
        <input type="color" class="form-control">
        
        
        <label>¿Quien eres?:</label>
            <div id="pilotCarousel" class="carousel slide mb-1 " data-bs-ride="carousel" >
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="../assets/pilotos/1.png" class="d-block w-100" alt="Piloto 1" data-img="1.png">
                    </div>
                    <div class="carousel-item">
                        <img src="../assets/pilotos/2.png" class="d-block w-100" alt="Piloto 2" data-img="2.png">
                    </div>
                    <div class="carousel-item">
                        <img src="../assets/pilotos/3.png" class="d-block w-100" alt="Piloto 3" data-img="3.png">
                    </div>
                    <div class="carousel-item">
                        <img src="../assets/pilotos/4.png" class="d-block w-100" alt="Piloto 4" data-img="4.png">
                    </div>
                    <div class="carousel-item">
                        <img src="../assets/pilotos/5.png" class="d-block w-100" alt="Piloto 5" data-img="5.png">
                    </div>
                    <div class="carousel-item">
                        <img src="../assets/pilotos/6.png" class="d-block w-100" alt="Piloto 6" data-img="6.png">
                    </div>
                    <div class="carousel-item">
                        <img src="../assets/pilotos/7.png" class="d-block w-100" alt="Piloto 7" data-img="7.png">
                    </div>
                    <div class="carousel-item">
                        <img src="../assets/pilotos/8.png" class="d-block w-100" alt="Piloto 8" data-img="8.png">
                    </div>
                    <div class="carousel-item">
                        <img src="../assets/pilotos/9.png" class="d-block w-100" alt="Piloto 9" data-img="9.png">
                    </div>
                </div>
            <div class="carousel-btn-container">
                <button class="crs_btn" type="button" data-bs-target="#pilotCarousel" data-bs-slide="prev">
                    <i class="bi bi-arrow-left"></i>
                </button>
                <button class="crs_btn" type="button" data-bs-target="#pilotCarousel" data-bs-slide="next">
                    <i class="bi bi-arrow-right"></i>
                </button>
            </div>
            </div>

            <div class="action-buttons">
            <button type="submit" >Guardar cambios</button>
            <a href="../index.html">ir a la nave</a>
            </div>
        </form>
        
    </div>
    
</div>


<div class="asistente">
    <img src="../assets/cosas/planet1.gif" id="menu-toggle" class="asistente_btn" alt="Botón de asistente">
    
    <div class="asistente_menu" id="asistente_menu">
        <iframe width="100%" height="300" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/2139663321&color=%2389766c&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"></iframe>
        <div class="soundcloud-credits">
            <a href="https://soundcloud.com/limitless_truevibe" title="Limitless TrueVibe" target="_blank">Limitless TrueVibe</a> · <a href="https://soundcloud.com/limitless_truevibe/sci-fi-kung-fu" title="Sci-fi Kung-fu" target="_blank">Sci-fi Kung-fu</a>
        </div>
    </div>
</div>

<!-- Bootstrap JS CDN -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>

//menu
    document.addEventListener("DOMContentLoaded", () => {
        const menuToggle = document.getElementById("menu-toggle");
        const asistente = document.querySelector(".asistente");
        
        menuToggle.addEventListener("click", (e) => {
            e.stopPropagation();
            asistente.classList.toggle("open");
        });
        
        // Cerrar el menú al hacer clic fuera de él
        document.addEventListener("click", (e) => {
            if (!asistente.contains(e.target)) {
                asistente.classList.remove("open");
            }
        });
        
        // Prevenir que los clics dentro del iframe cierren el menú
        const iframe = document.querySelector("iframe");
        iframe.addEventListener("load", () => {
            try {
                iframe.contentWindow.document.addEventListener("click", (e) => {
                    e.stopPropagation();
                });
            } catch (e) {
                console.log("No se pudo agregar listener al iframe:", e);
            }
        });
    });

    // Obtiene la imagen activa del carrusel
    function getSelectedImg() {
        const activeItem = document.querySelector('#pilotCarousel .carousel-item.active img');
        return activeItem.getAttribute('data-img');
    }

    document.getElementById('pilotForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const name = document.getElementById('pilotName').value;
        localStorage.setItem('pilotName', name);
        localStorage.setItem('pilotImg', getSelectedImg());
        alert('Información almacenada! Listo para la aventura');
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
//Animaciones AOS
AOS.init();
</script>
</body>
</html>